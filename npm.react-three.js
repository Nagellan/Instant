"use strict";(self.webpackChunkinstant=self.webpackChunkinstant||[]).push([[612],{62:(e,t,n)=>{n.d(t,{H:()=>i});var r=n(294),o=n(628);function i(e,t,...n){const i=r.useRef(),a=(0,o.Ky)((e=>e.scene));return r.useEffect((()=>(t&&e.current&&(i.current=new t(e.current,...n),i.current&&a.add(i.current)),()=>{i.current&&a.remove(i.current)})),[a,t,e,n]),(0,o.xQ)((()=>{var e;null!=(e=i.current)&&e.update&&i.current.update()})),i}},628:(e,t,n)=>{n.d(t,{Xz:()=>I,xQ:()=>F,Ky:()=>D});var r=n(212),o=n(294),i=n(671),a=n(525),s=n.n(a),c=n(840),l=n(998),u=n(878),f=n(460);const d={obj:e=>e===Object(e)&&!d.arr(e)&&"function"!=typeof e,fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,und:e=>void 0===e,arr:e=>Array.isArray(e),equ(e,t){if(typeof e!=typeof t||!!e!=!!t)return!1;if(d.str(e)||d.num(e)||d.obj(e))return e===t;if(d.arr(e)&&e==t)return!0;let n;for(n in e)if(!(n in t))return!1;for(n in t)if(e[n]!==t[n])return!1;return!d.und(n)||e===t}};function p(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function h(e,t,n,r){const o=n.get(t);o&&(n.delete(t),0===n.size&&(e.delete(r),o.target.releasePointerCapture(r)))}const m=e=>e&&!!e.getState,v=(e,t)=>{var n,r;return{root:m(e)?e:null!=(n=null==(r=e.__r3f)?void 0:r.root)?n:t.__r3f.root,container:m(e)?e.getState().scene:e}},g="__default",b={};let y={};function _(e,t){const n=e;return(null!=t&&t.primitive||!n.__r3f)&&(n.__r3f={root:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...t}),e}const w=e=>e&&e.isOrthographicCamera;function P(e){return Array.isArray(e)?Math.min(Math.max(e[0],window.devicePixelRatio),e[1]):e}const C=o.createContext(null);let j,O=[],M=[],E=[];function S(e,t){for(j=0;j<e.length;j++)e[j](t)}function k(e,t){let n=t.clock.getDelta();for("never"===t.frameloop&&"number"==typeof e&&(n=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),j=0;j<t.internal.subscribers.length;j++)t.internal.subscribers[j].ref.current(t,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}function x(e){const{handlePointer:t}=function(e){const t=new r.Vector3;function n(e){return e.filter((e=>["Move","Over","Enter","Out","Leave"].some((t=>{var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))))}function o(t){const{internal:n}=e.getState();Array.from(n.hovered.values()).forEach((e=>{if(!t.length||!t.find((t=>t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId))){const r=e.eventObject.__r3f,o=null==r?void 0:r.handlers;if(n.hovered.delete(p(e)),null!=r&&r.eventCount){const n={...e,intersections:t||[]};null==o.onPointerOut||o.onPointerOut(n),null==o.onPointerLeave||o.onPointerLeave(n)}}}))}function i(e,t){t.forEach((t=>{var n;return null==(n=t.__r3f)||null==n.handlers.onPointerMissed?void 0:n.handlers.onPointerMissed(e)}))}return{handlePointer:r=>{switch(r){case"onPointerLeave":case"onPointerCancel":return()=>o([]);case"onLostPointerCapture":return t=>{const{internal:n}=e.getState();"pointerId"in t&&!n.capturedMap.has(t.pointerId)&&(n.capturedMap.delete(t.pointerId),o([]))}}return a=>{const{onPointerMissed:s,internal:c}=e.getState();!function(t){var n;const r=e.getState(),{raycaster:o,mouse:i,camera:a,size:s}=r,{offsetX:c,offsetY:l}=null!=(n=null==o.computeOffsets?void 0:o.computeOffsets(t,r))?n:t,{width:u,height:f}=s;i.set(c/u*2-1,-l/f*2+1),o.setFromCamera(i,a)}(a),c.lastEvent.current=a;const l="onPointerMove"===r,u="onClick"===r||"onContextMenu"===r||"onDoubleClick"===r,f=function(t,n){const{internal:r}=e.getState();if("pointerId"in n&&r.capturedMap.has(n.pointerId))for(let e of r.capturedMap.get(n.pointerId).values())t.push(e.intersection);return t}(function(t){const n=e.getState(),{raycaster:r,internal:o}=n;if(!r.enabled)return[];const i=new Set,a=[],s=t?t(o.interaction):o.interaction;let c=r.intersectObjects(s,!0).filter((e=>{const t=p(e);return!i.has(t)&&(i.add(t),!0)}));r.filter&&(c=r.filter(c,n));for(const e of c){let t=e.object;for(;t;){var l;null!=(l=t.__r3f)&&l.eventCount&&a.push({...e,eventObject:t}),t=t.parent}}return a}(l?n:void 0),a),d=u?function(t){const{internal:n}=e.getState(),r=t.offsetX-n.initialClick[0],o=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(r*r+o*o))}(a):0;"onPointerDown"===r&&(c.initialClick=[a.offsetX,a.offsetY],c.initialHits=f.map((e=>e.eventObject))),u&&!f.length&&d<=2&&(i(a,c.interaction),s&&s(a)),l&&o(f),function(n,r,i,a){const{raycaster:s,mouse:c,camera:l,internal:u}=e.getState();if(n.length){const e=t.set(c.x,c.y,0).unproject(l),f={stopped:!1};for(const t of n){const d=e=>{var n,r;return null!=(n=null==(r=u.capturedMap.get(e))?void 0:r.has(t.eventObject))&&n},p=e=>{const n={intersection:t,target:r.target};u.capturedMap.has(e)?u.capturedMap.get(e).set(t.eventObject,n):u.capturedMap.set(e,new Map([[t.eventObject,n]])),r.target.setPointerCapture(e)},m=e=>{const n=u.capturedMap.get(e);n&&h(u.capturedMap,t.eventObject,n,e)};let v={};for(let e in r){let t=r[e];"function"!=typeof t&&(v[e]=t)}let g={...t,...v,spaceX:c.x,spaceY:c.y,intersections:n,stopped:f.stopped,delta:i,unprojectedPoint:e,ray:s.ray,camera:l,stopPropagation:()=>{const e="pointerId"in r&&u.capturedMap.get(r.pointerId);(!e||e.has(t.eventObject))&&(g.stopped=f.stopped=!0,u.hovered.size&&Array.from(u.hovered.values()).find((e=>e.eventObject===t.eventObject)))&&o([...n.slice(0,n.indexOf(t)),t])},target:{hasPointerCapture:d,setPointerCapture:p,releasePointerCapture:m},currentTarget:{hasPointerCapture:d,setPointerCapture:p,releasePointerCapture:m},sourceEvent:r,nativeEvent:r};if(a(g),!0===f.stopped)break}}}(f,a,d,(e=>{const t=e.eventObject,n=t.__r3f,o=null==n?void 0:n.handlers;if(null!=n&&n.eventCount)if(l){if(o.onPointerOver||o.onPointerEnter||o.onPointerOut||o.onPointerLeave){const t=p(e),n=c.hovered.get(t);n?n.stopped&&e.stopPropagation():(c.hovered.set(t,e),null==o.onPointerOver||o.onPointerOver(e),null==o.onPointerEnter||o.onPointerEnter(e))}null==o.onPointerMove||o.onPointerMove(e)}else{const n=o[r];n?u&&!c.initialHits.includes(t)||(i(a,c.interaction.filter((e=>!c.initialHits.includes(e)))),n(e)):u&&c.initialHits.includes(t)&&i(a,c.interaction.filter((e=>!c.initialHits.includes(e))))}}))}}}}(e),n={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};return{connected:!1,handlers:Object.keys(n).reduce(((e,n)=>({...e,[n]:t(n)})),{}),connect:t=>{var r;const{set:o,events:i}=e.getState();null==i.disconnect||i.disconnect(),o((e=>({events:{...e.events,connected:t}}))),Object.entries(null!=(r=null==i?void 0:i.handlers)?r:[]).forEach((([e,r])=>{const[o,i]=n[e];t.addEventListener(o,r,{passive:i})}))},disconnect:()=>{const{set:t,events:r}=e.getState();var o;r.connected&&(Object.entries(null!=(o=r.handlers)?o:[]).forEach((([e,t])=>{if(r&&r.connected instanceof HTMLElement){const[o]=n[e];r.connected.removeEventListener(o,t)}})),t((e=>({events:{...e.events,connected:!1}}))))}}}const z="undefined"!=typeof window?o.useLayoutEffect:o.useEffect;function A({set:e}){return z((()=>(e(new Promise((()=>null))),()=>e(!1))),[]),null}class T extends o.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}T.getDerivedStateFromError=()=>({error:!0});const I=o.forwardRef((function({children:e,fallback:t,tabIndex:n,resize:a,id:s,style:c,className:l,events:p,...h},m){const[v,{width:g,height:b}]=(0,f.Z)({scroll:!0,debounce:{scroll:50,resize:0},...a}),y=o.useRef(null),[C,j]=o.useState(!1),[O,M]=o.useState(!1);if(C)throw C;if(O)throw O;return z((()=>{g>0&&b>0&&function(e,t,{gl:n,size:a,mode:s=W[1],events:c,onCreated:l,...u}={}){var f,p,h,m,v;a||(a={width:null!=(p=null==(h=t.parentElement)?void 0:h.clientWidth)?p:0,height:null!=(m=null==(v=t.parentElement)?void 0:v.clientHeight)?m:0});let g=N.get(t),b=null==g?void 0:g.fiber,y=null==g?void 0:g.store,C=null==(f=y)?void 0:f.getState();if(b&&C&&(void 0===u.dpr||d.equ(C.viewport.dpr,P(u.dpr))||C.setDpr(u.dpr),C.size.width===a.width&&C.size.height===a.height||C.setSize(a.width,a.height),C.frameloop!==u.frameloop&&C.setFrameloop(u.frameloop),u.linear!==C.internal.lastProps.linear&&(B(t),b=void 0)),!b){const e=((e,t)=>{const n="function"==typeof e?e(t):e;if(null!=(o=n)&&o.render)return n;var o;const i=new r.WebGLRenderer({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0,...e});return i.outputEncoding=r.sRGBEncoding,i.toneMapping=r.ACESFilmicToneMapping,e&&U(i,e),i})(n,t);u.vr&&(e.xr.enabled=!0,e.setAnimationLoop((e=>V(e,!0)))),y=((e,t,n,a)=>{const{gl:s,size:c,shadows:l=!1,linear:u=!1,flat:f=!1,vr:d=!1,orthographic:p=!1,frameloop:h="always",dpr:m=1,performance:v,clock:g=new r.Clock,raycaster:b,camera:y,onPointerMissed:C}=a;l&&(s.shadowMap.enabled=!0,"object"==typeof l?Object.assign(s.shadowMap,l):s.shadowMap.type=r.PCFSoftShadowMap),u&&(s.outputEncoding=r.LinearEncoding),f&&(s.toneMapping=r.NoToneMapping),"never"===h&&(g.stop(),g.elapsedTime=0);const j=(0,i.Z)(((i,c)=>{const l=new r.Raycaster,{params:j,...O}=b||{};e(l,{enabled:!0,...O,params:{...l.params,...j}});const M=y instanceof r.Camera,E=M?y:p?new r.OrthographicCamera(0,0,0,0,.1,1e3):new r.PerspectiveCamera(75,0,.1,1e3);M||(E.position.z=5,y&&e(E,y),null!=y&&y.rotation||E.lookAt(0,0,0));const S=P(m),k=new r.Vector3,x=new r.Vector3,z=new r.Vector3;function A(e=c().camera,t=x,n=c().size){const{width:o,height:i}=n,a=o/i;t instanceof r.Vector3?z.copy(t):z.set(...t);const s=e.getWorldPosition(k).distanceTo(z);if(w(e))return{width:o/e.zoom,height:i/e.zoom,factor:1,distance:s,aspect:a};{const t=e.fov*Math.PI/180,n=2*Math.tan(t/2)*s,r=n*(o/i);return{width:r,height:n,factor:o/r,distance:s,aspect:a}}}let T;const I=e=>i((t=>({performance:{...t.performance,current:e}})));return{gl:s,set:i,get:c,invalidate:()=>t(c()),advance:(e,t)=>n(e,t,c()),linear:u,flat:f,scene:_(new r.Scene),camera:E,controls:null,raycaster:l,clock:g,mouse:new r.Vector2,vr:d,frameloop:h,onPointerMissed:C,performance:{current:1,min:.5,max:1,debounce:200,...v,regress:()=>{const e=c();T&&clearTimeout(T),e.performance.current!==e.performance.min&&I(e.performance.min),T=setTimeout((()=>I(c().performance.max)),e.performance.debounce)}},size:{width:0,height:0},viewport:{initialDpr:S,dpr:S,width:0,height:0,aspect:0,distance:0,factor:0,getCurrentViewport:A},setSize:(e,t)=>{const n={width:e,height:t};i((e=>({size:n,viewport:{...e.viewport,...A(E,x,n)}})))},setDpr:e=>i((t=>({viewport:{...t.viewport,dpr:P(e)}}))),setFrameloop:(e="always")=>i((()=>({frameloop:e}))),events:{connected:!1},internal:{active:!1,priority:0,frames:0,lastProps:a,lastEvent:o.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(e,t=0)=>(i((({internal:n})=>({internal:{...n,priority:n.priority+(t>0?1:0),subscribers:[...n.subscribers,{ref:e,priority:t}].sort(((e,t)=>e.priority-t.priority))}}))),()=>{i((({internal:n})=>({internal:{...n,priority:n.priority-(t>0?1:0),subscribers:n.subscribers.filter((t=>t.ref!==e))}})))})}}})),O=j.getState();let M=O.size,E=O.viewport.dpr;return j.subscribe((()=>{const{camera:e,size:t,viewport:n,internal:o}=j.getState();t===M&&n.dpr===E||(e.manual||o.lastProps.camera instanceof r.Camera||(w(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld()),s.setPixelRatio(n.dpr),s.setSize(t.width,t.height),M=t,E=n.dpr)})),c&&O.setSize(c.width,c.height),j.subscribe((e=>t(e))),j})(U,G,V,{gl:e,size:a,...u});const l=y.getState();b=q.createContainer(y,W.indexOf(s),!1,null),N.set(t,{fiber:b,store:y}),c&&l.set({events:c(y)})}if(y&&b)return q.updateContainer(o.createElement($,{store:y,element:e,onCreated:l,target:t}),b,null,(()=>{})),y;throw"Error creating root!"}(o.createElement(T,{set:M},o.createElement(o.Suspense,{fallback:o.createElement(A,{set:j})},e)),y.current,{...h,size:{width:g,height:b},events:p||x})}),[g,b,e]),z((()=>{const e=y.current;return()=>B(e)}),[]),o.createElement("div",{ref:v,id:s,className:l,tabIndex:n,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",...c}},o.createElement("canvas",{ref:(0,u.Z)([y,m]),style:{display:"block"}},t))}));function L(){const e=o.useContext(C);if(!e)throw"R3F hooks can only be used within the Canvas component!";return e}function D(e=(e=>e),t){return L()(e,t)}function F(e,t=0){const n=L().getState().internal.subscribe,r=o.useRef(e);return o.useLayoutEffect((()=>{r.current=e}),[e]),o.useLayoutEffect((()=>n(r,t)),[t,n]),null}function R(e,t){return function(n,...r){const o=new n;return e&&e(o),Promise.all(r.map((e=>new Promise(((n,r)=>o.load(e,(e=>{e.scene&&Object.assign(e,function(e){const t={nodes:{},materials:{}};return e&&e.traverse((e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material)})),t}(e.scene)),n(e)}),t,(t=>r(`Could not load ${e}: ${t.message}`))))))))}}function H(e,t,n,r){const o=Array.isArray(t)?t:[t],i=(0,l.G)(R(n,r),e,...o);return Array.isArray(t)?i:i[0]}H.preload=function(e,t,n){const r=Array.isArray(t)?t:[t];return l.G.preload(R(n),e,...r)},H.clear=function(e,t){const n=Array.isArray(t)?t:[t];return l.G.clear(e,...n)};const N=new Map,W=["legacy","blocking","concurrent"],{invalidate:G,advance:V}=function(e){let t,n=!1;function r(o){if(n=!0,t=0,S(O,o),e.forEach((e=>{const n=e.store.getState();n.internal.active&&("always"===n.frameloop||n.internal.frames>0)&&(t+=k(o,n))})),S(M,o),t>0)return requestAnimationFrame(r);S(E,o),n=!1}return{loop:r,invalidate:function t(o){if(!o)return e.forEach((e=>t(e.store.getState())));!o.vr&&o.internal.active&&"never"!==o.frameloop&&(o.internal.frames=Math.min(60,o.internal.frames+1),n||(n=!0,requestAnimationFrame(r)))},advance:function(t,n=!0,r){n&&S(O,t),r?k(t,r):e.forEach((e=>k(t,e.store.getState()))),n&&S(M,t)}}}(N),{reconciler:q,applyProps:U}=function(e){function t(e,{children:t,key:n,ref:r,...o},{children:i,key:a,ref:s,...c}={},l=!1){var u;const f=null!=(u=null==e?void 0:e.__r3f)?u:{},p=Object.entries(o),h=[];if(l){const e=Object.keys(c);for(let t=0;t<e.length;t++)o.hasOwnProperty(e[t])||p.unshift([e[t],g+"remove"])}p.forEach((([t,n])=>{var r,o,i;if(null!=(r=e.__r3f)&&r.primitive&&"object"===t)return;if(o=n,i=c[t],d.arr(o)&&d.equ(o,i)||o===i)return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(t))return h.push([t,n,!0,[]]);let a=[];t.includes("-")&&(a=t.split("-")),h.push([t,n,!1,a])}));const m={...o};return f.memoizedProps&&f.memoizedProps.args&&(m.args=f.memoizedProps.args),f.memoizedProps&&f.memoizedProps.attach&&(m.attach=f.memoizedProps.attach),{accumulative:l,memoized:m,changes:h}}function n(e,n){var a,s,c;const l=null!=(a=null==e?void 0:e.__r3f)?a:{},u=l.root,f=null!=(s=null==u||null==u.getState?void 0:u.getState())?s:{},{memoized:d,changes:p}=(h=n)&&h.memoized&&h.changes?n:t(e,n);var h;const m=l.eventCount;if(e.__r3f&&(e.__r3f.memoizedProps=d),p.forEach((([t,n,i,a])=>{let s=e,c=s[t];if(a.length&&(c=a.reduce(((e,t)=>e[t]),e),!c||!c.set)){const[n,...r]=a.reverse();s=r.reverse().reduce(((e,t)=>e[t]),e),t=n}if(n===g+"remove")if(c&&c.constructor)n=new c.constructor(d.args);else if(s.constructor){const e=new s.constructor(s.__r3f.memoizedProps.args);n=e[c],e.dispose&&e.dispose()}else n=0;if(i)n?l.handlers[t]=n:delete l.handlers[t],l.eventCount=Object.keys(l.handlers).length;else if(c&&c.set&&(c.copy||c instanceof r.Layers)){if(Array.isArray(n))c.fromArray?c.fromArray(n):c.set(...n);else if(c.copy&&n&&n.constructor&&c.constructor.name===n.constructor.name)c.copy(n);else if(void 0!==n){const e=c instanceof r.Color;!e&&c.setScalar?c.setScalar(n):c instanceof r.Layers&&n instanceof r.Layers?c.mask=n.mask:c.set(n),!f.linear&&e&&c.convertSRGBToLinear()}}else s[t]=n,!f.linear&&s[t]instanceof r.Texture&&(s[t].encoding=r.sRGBEncoding);o(e)})),l.parent&&f.internal&&e.raycast&&m!==l.eventCount){const t=f.internal.interaction.indexOf(e);t>-1&&f.internal.interaction.splice(t,1),l.eventCount&&f.internal.interaction.push(e)}return p.length&&null!=(c=e.__r3f)&&c.parent&&i(e),e}function o(e){var t,n;const r=null==(t=e.__r3f)||null==(n=t.root)||null==n.getState?void 0:n.getState();r&&0===r.internal.frames&&r.invalidate()}function i(e){null==e.onUpdate||e.onUpdate(e)}function a(e,{args:t=[],...o},i,a,s){let c,l=`${e[0].toUpperCase()}${e.slice(1)}`;if(!m(i)&&s){const e=t=>t.return?e(t.return):t.stateNode&&t.stateNode.containerInfo;i=e(s)}if(!i||!m(i))throw`No valid root for ${l}!`;if("primitive"===e){if(void 0===o.object)throw"Primitives without 'object' are invalid!";c=_(o.object,{root:i,primitive:!0})}else{const e=y[l]||r[l];if(!e)throw`${l} is not part of the THREE namespace! Did you forget to extend? See: https://github.com/pmndrs/react-three-fiber/blob/master/markdown/api.md#using-3rd-party-objects-declaratively`;if(!Array.isArray(t))throw"The args prop must be an array!";c=_(new e(...t),{root:i,memoizedProps:{args:0===t.length?null:t}})}return"attachFns"in o||(l.endsWith("Geometry")?o={attach:"geometry",...o}:l.endsWith("Material")&&(o={attach:"material",...o})),n(c,o),c}function l(e,t){let n=!1;if(t){if(t.attachArray)d.arr(e[t.attachArray])||(e[t.attachArray]=[]),e[t.attachArray].push(t);else if(t.attachObject)d.obj(e[t.attachObject[0]])||(e[t.attachObject[0]]={}),e[t.attachObject[0]][t.attachObject[1]]=t;else if(t.attach&&!d.fun(t.attach))e[t.attach]=t;else if(d.arr(t.attachFns)){const[n]=t.attachFns;d.str(n)&&d.fun(e[n])?e[n](t):d.fun(n)&&n(t,e)}else t.isObject3D&&e.isObject3D&&(e.add(t),n=!0);n||e.__r3f.objects.push(t),t.__r3f||_(t,{}),t.__r3f.parent=e,i(t),o(t)}}function u(e,t,n){let r=!1;if(t){if(t.attachArray){const r=e[t.attachArray];d.arr(r)||(e[t.attachArray]=[]),r.splice(r.indexOf(n),0,t)}else{if(t.attachObject||t.attach&&!d.fun(t.attach))return l(e,t);if(t.isObject3D&&e.isObject3D){t.parent=e,t.dispatchEvent({type:"added"});const o=e.children.filter((e=>e!==t)),i=o.indexOf(n);e.children=[...o.slice(0,i),t,...o.slice(i)],r=!0}}r||e.__r3f.objects.push(t),t.__r3f||_(t,{}),t.__r3f.parent=e,i(t),o(t)}}function f(e,t,n=!1){e&&[...e].forEach((e=>p(t,e,n)))}function p(e,t,n){if(t){var r,i;if(t.__r3f&&(t.__r3f.parent=null),null!=(r=e.__r3f)&&r.objects&&(e.__r3f.objects=e.__r3f.objects.filter((e=>e!==t))),t.attachArray)e[t.attachArray]=e[t.attachArray].filter((e=>e!==t));else if(t.attachObject)delete e[t.attachObject[0]][t.attachObject[1]];else if(t.attach&&!d.fun(t.attach)&&e[t.attach]===t)e[t.attach]=null;else if(d.arr(t.attachFns)){const[,n]=t.attachFns;d.str(n)&&d.fun(e[n])?e[n](t):d.fun(n)&&n(t,e)}else if(t.isObject3D&&e.isObject3D){var a;e.remove(t),null!=(a=t.__r3f)&&a.root&&function(e,t){const{internal:n}=e.getState();n.interaction=n.interaction.filter((e=>e!==t)),n.initialHits=n.initialHits.filter((e=>e!==t)),n.hovered.forEach(((e,r)=>{e.eventObject!==t&&e.object!==t||n.hovered.delete(r)})),n.capturedMap.forEach(((e,r)=>{h(n.capturedMap,t,e,r)}))}(t.__r3f.root,t)}const l=null==(i=t.__r3f)?void 0:i.primitive,u=void 0===n?null!==t.dispose&&!l:n;var s;l||(f(null==(s=t.__r3f)?void 0:s.objects,t,u),f(t.children,t,u)),t.__r3f&&(delete t.__r3f.root,delete t.__r3f.objects,delete t.__r3f.handlers,delete t.__r3f.memoizedProps,l||delete t.__r3f),u&&t.dispose&&"Scene"!==t.type&&(0,c.unstable_runWithPriority)(c.unstable_IdlePriority,(()=>{try{t.dispose()}catch(e){}})),o(e)}}return{reconciler:s()({now:c.unstable_now,createInstance:a,removeChild:p,appendChild:l,appendInitialChild:l,insertBefore:u,warnsIfNotActing:!0,supportsMutation:!0,isPrimaryRenderer:!1,scheduleTimeout:d.fun(setTimeout)?setTimeout:void 0,cancelTimeout:d.fun(clearTimeout)?clearTimeout:void 0,setTimeout:d.fun(setTimeout)?setTimeout:void 0,clearTimeout:d.fun(clearTimeout)?clearTimeout:void 0,noTimeout:-1,appendChildToContainer:(e,t)=>{const{container:n,root:r}=v(e,t);n.__r3f.root=r,l(n,t)},removeChildFromContainer:(e,t)=>p(v(e,t).container,t),insertInContainerBefore:(e,t,n)=>u(v(e,t).container,t,n),prepareUpdate(e,n,r,o){if(e.__r3f.primitive&&o.object&&o.object!==e)return[!0];{const{args:n=[],children:i,...a}=o,{args:s=[],children:c,...u}=r;if(!Array.isArray(n))throw"The args prop must be an array!";if(n.some(((e,t)=>e!==s[t])))return[!0];const f=t(e,a,u,!0);if(f.changes.length)return[!1,f];if(e.attach&&"function"!=typeof e.attach){const t=e.__r3f.parent;t&&t[e.attach]!==e&&l(t,e)}return null}},commitUpdate(e,[t,r],o,i,s,c){t?function(e,t,n,r){var o;const i=null==(o=e.__r3f)?void 0:o.parent;if(!i)return;const s=a(t,n,e.__r3f.root);"primitive"!==t&&e.children&&(e.children.forEach((e=>l(s,e))),e.children=[]),e.__r3f.objects.forEach((e=>l(s,e))),e.__r3f.objects=[],p(i,e),l(i,s),[r,r.alternate].forEach((e=>{null!==e&&(e.stateNode=s,e.ref&&("function"==typeof e.ref?e.ref(s):e.ref.current=s))}))}(e,o,s,c):n(e,r)},hideInstance(e){e.isObject3D&&(e.visible=!1,o(e))},unhideInstance(e,t){(e.isObject3D&&null==t.visible||t.visible)&&(e.visible=!0,o(e))},hideTextInstance(){throw new Error("Text is not allowed in the R3F tree.")},getPublicInstance:e=>e,getRootHostContext:e=>b,getChildHostContext:e=>e,createTextInstance(){},finalizeInitialChildren(e){var t;return!!(null!=(t=null==e?void 0:e.__r3f)?t:{}).handlers},commitMount(e){var t;const n=null!=(t=null==e?void 0:e.__r3f)?t:{};e.raycast&&n.handlers&&n.eventCount&&e.__r3f.root.getState().internal.interaction.push(e)},shouldDeprioritizeSubtree:()=>!1,prepareForCommit:()=>null,preparePortalMount(e){_(e)},resetAfterCommit(){},shouldSetTextContent:()=>!1,clearContainer:()=>!1}),applyProps:n}}();function $({store:e,element:t,onCreated:n,target:r}){return o.useEffect((()=>{const t=e.getState();t.set((e=>({internal:{...e.internal,active:!0}}))),null==t.events.connect||t.events.connect(r),n&&n(t)}),[]),o.createElement(C.Provider,{value:e},t)}function B(e,t){const n=N.get(e),r=null==n?void 0:n.fiber;if(r){const o=null==n?void 0:n.store.getState();o&&(o.internal.active=!1),q.updateContainer(null,r,null,(()=>{o&&setTimeout((()=>{var n,r,i;null==o.events.disconnect||o.events.disconnect(),null==(n=o.gl)||null==(r=n.renderLists)||null==r.dispose||r.dispose(),null==(i=o.gl)||null==i.forceContextLoss||i.forceContextLoss(),function(e){e.dispose&&"Scene"!==e.type&&e.dispose();for(const r in e){var t,n;null==(t=(n=r).dispose)||t.call(n),delete e[r]}}(o),N.delete(e),t&&t(e)}),500)}))}}q.act,q.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:"17.0.2"})}}]);